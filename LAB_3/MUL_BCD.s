	AREA RESET ,  DATA, READONLY
	EXPORT __Vectors
__Vectors
	DCD 0X10001000
	DCD Reset_Handler
	ALIGN
	
	AREA mycode, CODE, READONLY
	ENTRY
	EXPORT Reset_Handler

Reset_Handler
	LDR R0, =NUM1
	LDR R0, [R0]
	LDR R1, =NUM2
	LDR R1, [R1]
	BL BCD_HEX
	
LOOP	TEQ R1, #0
	BEQ EXIT
	MOV R5, R0
	MOV R6, R3
	MOV R9, #0
	MOV R12, #8
	LDR R4, =0
UP	TEQ R12, #0
	BEQ DONE
	AND R7, R5, #0x0F
	AND R8, R6, #0x0F
	ADD R8, R7, R8
	ADD R8, R4
	CMP R8, #0x0A
	BLO SKIP
	SUB R8, #0x0A
	MOV R4, #1
	B DOWN

SKIP	MOV R4, #0
DOWN	LSR R5, #4
	LSR R6, #4
	ORR R9, R8
	ROR R9, #4
	SUB R12, #1
	B UP

DONE	MOV R3, R9
	SUB R1, #1
	B LOOP
	
EXIT	LDR R12, =RES
	STR R3, [R12]
STOP	B STOP

BCD_HEX
	MOV R7, #8
	MOV R8, #0
	MOV R6, #1
	MOV R10, #0X0F
	MOV R11, #0X0A
H_UP	CMP R7, #0
	BEQ H_DONE
	AND R12, R1, R10
	ROR R1, #4
	MUL R12, R6
	ADD R8, R12
	SUB R7, #1
	MUL R6, R11
	B H_UP
H_DONE	MOV R1, R8
	BX LR
	
NUM1 DCD 0x50
NUM2 DCD 0x24

	AREA mydata, DATA, READWRITE
RES DCD 0
	END